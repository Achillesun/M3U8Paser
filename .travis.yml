language: objective-c
xcode_project: M3U8Kit.xcodeproj
# xcode_workspace: <WORKSPACE_PLACEHOLDER>
xcode_scheme: M3U8Kit
env:
  global:
    - FRAMEWORK_NAME=M3U8Kit
before_install:
  - brew update
  - brew outdated carthage || brew upgrade carthage
  - gem install xcpretty
  
script:
  - xcodebuild -project $FRAMEWORK_NAME.xcodeproj -scheme $FRAMEWORK_NAME | xcpretty
  
after_success:
  - if [ "$FASTLANE_LANE" == "code_coverage" ]; then
     bash <(curl -s https://codecov.io/bash);
    fi

before_deploy:
  - carthage build --no-skip-current
  - carthage archive $FRAMEWORK_NAME
# deploy:
#   provider: script
#   script: fastlane complete_framework_release --env deploy
#   on:
#     tags: true
notifications:
  email: false
